---
/**
 * Header global del sitio.
 * - Navegación principal
 * - Marca (nombre)
 * - Links sociales (opcional)
 *
 * Asume que existen:
 * - src/data/navigation.ts
 * - src/data/socials.ts
 *
 * Si aún no existen, más abajo te dejo un fallback seguro.
 */

import navigation from "../../data/navigation";
import socials from "../../data/socials";

// Accesibilidad: permite resaltar el link activo
const currentPath = Astro.url.pathname;

function isActive(href: string) {
  if (href === "/") return currentPath === "/";
  return currentPath.startsWith(href);
}
---

<header class="site-header" role="banner">
  <div class="container">
    <!-- Marca -->
    <a class="brand" href="/" aria-label="Go to home">
      <span class="brand-name">Andrés Castrillón</span>
      <span class="brand-subtitle">Software Engineer · XR Developer · Aviation Maintenance Engineer</span>
    </a>

    <!-- Navegación -->
    <nav class="nav" aria-label="Primary navigation">
      <ul class="nav-list" role="list">
        {navigation.map((item) => (
          <li>
            <a
              class:list={["nav-link", isActive(item.href) && "active"]}
              href={item.href}
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>

    <!-- Socials (opcional) -->
    <div class="socials" aria-label="Social links">
      {socials?.length ? (
        <ul class="socials-list" role="list">
          {socials.map((s) => (
            <li>
              <a
                class="social-link"
                href={s.href}
                target="_blank"
                rel="noreferrer"
                aria-label={s.label}
                title={s.label}
              >
                {s.label}
              </a>
            </li>
          ))}
        </ul>
      ) : null}
    </div>
  </div>
</header>

<style>
  /* Layout */
  .site-header {
    position: sticky;
    top: 0;
    z-index: 50;
    background: white;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  }

  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 14px 18px;
    display: grid;
    grid-template-columns: 1.2fr 1fr auto;
    gap: 16px;
    align-items: center;
  }

  /* Marca */
  .brand {
    display: inline-flex;
    flex-direction: column;
    text-decoration: none;
    color: inherit;
    min-width: 0;
  }

  .brand-name {
    font-size: 16px;
    font-weight: 700;
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .brand-subtitle {
    font-size: 12px;
    line-height: 1.2;
    opacity: 0.75;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 4px;
  }

  /* Nav */
  .nav-list {
    display: flex;
    gap: 14px;
    justify-content: center;
    align-items: center;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .nav-link {
    display: inline-flex;
    padding: 8px 10px;
    text-decoration: none;
    color: inherit;
    border-radius: 8px;
    font-size: 14px;
    opacity: 0.85;
  }

  .nav-link:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.04);
  }

  .nav-link.active {
    opacity: 1;
    font-weight: 600;
    background: rgba(0, 0, 0, 0.06);
  }

  /* Socials */
  .socials-list {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    align-items: center;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .social-link {
    display: inline-flex;
    padding: 8px 10px;
    text-decoration: none;
    color: inherit;
    border-radius: 8px;
    font-size: 13px;
    opacity: 0.85;
  }

  .social-link:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.04);
  }

  /* Responsive */
  @media (max-width: 860px) {
    .container {
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .nav-list {
      justify-content: flex-start;
      flex-wrap: wrap;
    }

    .socials-list {
      justify-content: flex-start;
      flex-wrap: wrap;
    }
  }
</style>
